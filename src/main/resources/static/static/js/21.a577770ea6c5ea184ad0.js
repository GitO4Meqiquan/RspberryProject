webpackJsonp([21],{257:function(e,t,i){i(827);var a=i(106)(i(781),i(859),null,null);e.exports=a.exports},781:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(36),s=i.n(a),r=i(35),l=i.n(r),n=i(60),o=i(37),c=i.n(o);t.default={data:function(){return{Host:"http://172.26.251.125:8080",tableloading:!1,currentpage:1,searchcurrentpage:1,keywords:"",users:[],editTitle:"",editVisible:!1,addVisible:!1,powerVisible:!1,user:{username:"",editable:"禁止",description:"",enable:!1},power:[],roles:[],areas:[],selectroles:[],choices:[],selectchoices:[],num:null}},mounted:function(){this.loadusers()},methods:{loadusers:function(){var e=this;e.tableloading=!0,c.a.get(n.b+"/basic/users?page="+e.currentpage+"&size=10&keywords="+e.keywords).then(function(t){if(t&&200==t.status){e.tableloading=!1;var i=t.data;e.users=i.users,e.num=i.count,e.roles=[];for(var a in i.roles)e.roles.push(i.roles[a].nameZh)}})},editmenu:function(e){this.editTitle="修改信息",this.user.username=e.username,this.user.description=e.description,this.user.editable=e.editable,"允许"==this.user.editable?this.user.enable=!0:"禁止"==this.user.editable&&(this.user.enable=!1),this.editVisible=!0},editchange:function(e){0==e?this.user.editable="禁止":1==e&&(this.user.editable="允许")},clearuser:function(){this.user={username:"",editable:"禁止",description:"",enable:!1}},cancelEdit:function(){this.editVisible=!1,this.addVisible=!1,this.clearuser()},submitchange:function(){var e=this;e.tableloading=!0,e.editVisible=!1;var t=new URLSearchParams;t.append("username",e.user.username),t.append("editable",e.user.editable),t.append("description",e.user.description),c.a.post(n.b+"/basic/update",t).then(function(t){t&&200==t.status&&(e.tableloading=!1,e.clearuser(),e.loadusers())})},addmeun:function(){var e=this;e.editTitle="添加账户",e.clearuser(),e.addVisible=!0},addsubmit:function(){var e=this;return l()(s.a.mark(function t(){var i,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e,i.tableloading=!0,i.addVisible=!1,a=new URLSearchParams,a.append("username",i.user.username),a.append("editable",i.user.editable),a.append("description",i.user.description),a.append("password",i.user.username),t.next=10,c.a.post(n.b+"/basic/regis",a).then(function(e){e&&200==e.status&&(i.tableloading=!1,i.clearuser(),i.loadusers())});case 10:case"end":return t.stop()}},t,e)}))()},resetpwd:function(e){var t=this;t.tableloading=!0;var i=new URLSearchParams;i.append("username",e.username),i.append("password",e.username),c.a.post(n.b+"/basic/update",i).then(function(e){e&&200==e.status&&(t.tableloading=!1,t.loadusers())})},deleteuser:function(e){var t=this;t.tableloading=!0;var i=new URLSearchParams;i.append("username",e.username),c.a.post(n.b+"/basic/deleteUser",i).then(function(e){e&&200==e.status&&(t.tableloading=!1,t.loadusers())})},makesure:function(e){var t=this;t.$confirm("如果继续将删除账号"+e.username+"，删除后将无法恢复，请谨慎操作！","你确定要删除账号吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteuser(e),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getmenus:function(){var e=this;c.a.get(n.b+"/basic/getAllMenu").then(function(t){if(t&&200==t.status){var i=t.data.menus;for(var a in i)i.hasOwnProperty(a)&&e.areas.push(i[a].menuname)}})},showpower:function(e){var t=this;t.editTitle="权限分配",t.powerVisible=!0,t.user.username=e.username},clearpower:function(){var e=this;e.powerVisible=!1,e.selectroles=[]},search:function(){this.currentpage=1,this.loadusers()},submitpower:function(){var e=this;e.powerVisible=!1;var t=new URLSearchParams;t.append("rolename",e.selectroles),t.append("username",e.user.username),c.a.post(n.b+"/basic/addRole",t).then(function(t){t&&200==t.status&&(e.loadusers(),e.clearpower())})},formatroles:function(e){var t="";for(var i in e)t=t+e[i].nameZh+"<br>";return t}}}},796:function(e,t,i){t=e.exports=i(230)(!1),t.push([e.i,".el-switch__label{position:absolute;display:none;color:#fff}.el-switch__label--right{z-index:1;right:-3px;color:#fff}.el-switch__label--left{z-index:1;left:19px;color:#fff}.el-switch__label.is-active{display:block;color:#fff!important}.el-switch__core,.el-switch__label{width:50px!important}.el-dialog__body{padding:0;color:#606266;font-size:14px;word-break:break-all}.el-dialog__header{padding:20px 20px 10px;background:#eee}.el-main{display:block;-ms-flex:1;flex:1;-ms-flex-preferred-size:auto;flex-basis:auto;overflow:auto;box-sizing:border-box;padding:10px}.el-checkbox-button{width:320px;height:40px}.el-checkbox-button__inner{text-align:left;display:inline-block;position:relative;left:10px;width:300px;height:32px;padding:8px 12px;border:1px solid #ffebcd}",""])},827:function(e,t,i){var a=i(796);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(231)("0bb32d81",a,!0)},859:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-container",[i("el-header",{staticStyle:{height:"80px",width:"1000px"}},[i("div",{staticStyle:{display:"inline"}},[i("el-button",{staticStyle:{float:"left"},attrs:{round:"",type:"primary",icon:"el-icon-plus"},on:{click:e.addmeun}},[e._v(" 添加账户")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-input",{staticStyle:{width:"300px",float:"right"},attrs:{placeholder:"搜索",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1)]),e._v(" "),i("el-main",{staticStyle:{height:"600px"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.users,border:"",stripe:"",size:"mini"}},[i("el-table-column",{attrs:{type:"text",prop:"username",align:"center",fixed:"",label:"账户",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",align:"center",fixed:"",label:"角色权限",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{domProps:{innerHTML:e._s(e.formatroles(t.row.roles))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"text",prop:"description",align:"center",fixed:"",label:"说明",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",align:"center",fixed:"right",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.editmenu(t.row)}}},[e._v("修改信息")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.showpower(t.row)}}},[e._v("权限分配")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.resetpwd(t.row)}}},[e._v("重置密码")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.makesure(t.row)}}},[e._v("删除账号")])]}}])})],1)],1),e._v(" "),i("el-footer",[i("label",[e._v(e._s("显示第 "+(1+10*(e.currentpage-1))+" 到第 "+(10*e.currentpage>e.num?e.num:10*e.currentpage)+" 条记录，总共 "+e.num+" 条记录"))]),e._v(" "),i("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"prev, pager, next",total:e.num,"page-size":10,"current-page":e.currentpage},on:{"update:currentPage":function(t){e.currentpage=t},"update:current-page":function(t){e.currentpage=t},"current-change":e.loadusers}})],1)],1),e._v(" "),i("el-form",{staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.user}},[i("div",{staticStyle:{"text-align":"left"}},[i("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.editTitle,"close-on-click-modal":!1,visible:e.editVisible,width:"77%","append-to-body":!0},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"账户:","label-width":"120px","label-position":"right",prop:"username"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"",size:"mini"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1)]),e._v(" "),i("el-col",[i("div",[i("el-form-item",{attrs:{label:"说明:","label-width":"120px","label-position":"right",prop:"description"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入内容",size:"mini"},model:{value:e.user.description,callback:function(t){e.$set(e.user,"description",t)},expression:"user.description"}})],1)],1)])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.cancelEdit}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitchange}},[e._v("确 定")])],1)],1)],1)]),e._v(" "),i("el-form",{staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.user}},[i("div",{staticStyle:{"text-align":"left"}},[i("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.editTitle,"close-on-click-modal":!1,visible:e.addVisible,width:"77%","append-to-body":!0},on:{"update:visible":function(t){e.addVisible=t}}},[i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"账户:","label-width":"120px","label-position":"right",prop:"username"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1)]),e._v(" "),i("el-col",[i("div",[i("el-form-item",{attrs:{label:"说明:","label-width":"120px","label-position":"right",prop:"description"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入内容",size:"mini"},model:{value:e.user.description,callback:function(t){e.$set(e.user,"description",t)},expression:"user.description"}})],1)],1)])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.cancelEdit}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addsubmit}},[e._v("确 定")])],1)],1)],1)]),e._v(" "),i("div",{staticStyle:{"text-align":"left"}},[i("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.editTitle,"close-on-click-modal":!1,visible:e.powerVisible,width:"77%","append-to-body":!0},on:{"update:visible":function(t){e.powerVisible=t},close:e.clearpower}},[i("el-container",[i("el-main",[i("el-checkbox-group",{model:{value:e.selectroles,callback:function(t){e.selectroles=t},expression:"selectroles"}},e._l(e.roles,function(t){return i("el-checkbox-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])}),1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.clearpower}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitpower}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]}}});