webpackJsonp([15],{277:function(e,t,a){a(870);var n=a(39)(a(600),a(919),"data-v-a3e9e32e",null);e.exports=n.exports},293:function(e,t,a){a(296);var n=a(39)(a(294),a(298),null,null);e.exports=n.exports},294:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(27),r=a.n(n),s=a(26),i=a.n(s),o=a(68),c=a.n(o),l=a(118),d=a(67),p=a(119);t.default={data:function(){return{imgUrl:a(297),baseImgPath:d.a,test:0}},created:function(){this.adminInfo.id||this.getAdminData()},computed:c()({},a.i(p.a)(["adminInfo"])),props:["ok"],methods:c()({hh:function(){this.$store.dispatch("logout")}},a.i(p.b)(["getAdminData"]),{handleCommand:function(e){var t=this;return i()(r.a.mark(function n(){var s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("home"!=e){n.next=4;break}t.$router.push("/manage"),n.next=10;break;case 4:if("signout"!=e){n.next=10;break}return n.next=7,a.i(l.a)();case 7:s=n.sent,console.log(s),203==s.status?(t.$message({type:"success",message:"退出成功"}),t.$store.dispatch("logout","注销成功")):t.$message({type:"error",message:s.message});case 10:case"end":return n.stop()}},n,t)}))()},back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1)}})}},295:function(e,t,a){t=e.exports=a(268)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},296:function(e,t,a){var n=a(295);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(269)("200e1f3c",n,!0)},297:function(e,t,a){e.exports=a.p+"static/img/5gg.5a47940.png"},298:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header_container"},[e.ok?a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",plain:""},on:{click:e.back}},[e._v("返回")]):e._e(),e._v(" "),a("img",{staticStyle:{width:"30px"},attrs:{src:e.imgUrl,alt:""}}),e._v(" "),a("p",{staticStyle:{margin:"15px","font-size":"25px",color:"#1d90e6"}},[e._v("银翔科技智能运维平台")]),e._v(" "),a("el-breadcrumb",{staticStyle:{"margin-right":"auto",padding:"10px"},attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/HomeMap"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta,function(t,n){return a("el-breadcrumb-item",{key:n},[e._v(e._s(t))])})],2),e._v(" "),a("el-dropdown",{on:{command:e.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:e.baseImgPath+e.adminInfo.avatar}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"signout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},422:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(27),r=a.n(n),s=a(26),i=a.n(s),o=a(67);t.default={data:function(){return{props:{label:"area_name",childrean:"childrean"},showcheckbox:!0,AreaTree:[],addvisible:!1,areas:[],apartment:{parent:"",name:""},issuccess:!1,input:""}},mounted:function(){this.loadareas()},props:["init","change","defa"],watch:{init:{handler:function(e){this.init=e,e.length>0&&this.$refs.tree.filter(e)}},defa:{handler:function(e){this.defa=e,this.$refs.tree.setCheckedKeys(this.defa)}}},methods:{loadareas:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,e.post();case 3:e.init.length>0&&(e.$refs.tree.filter(e.init),e.showcheckbox=!1,e.$axios.get(o.c+"/device/area/getAllArea").then(function(t){console.log(t),e.areas=t.data})),e.$refs.tree.setCheckedKeys(e.defa);case 5:case"end":return t.stop()}},t,e)}))()},post:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new URLSearchParams,a.append("pid",-1),t.next=4,e.$axios.post(o.c+"/basic/getAreaTree",a);case 4:n=t.sent,e.AreaTree=n.data;case 6:case"end":return t.stop()}},t,e)}))()},getCheckedNodes:function(){for(var e=this.$refs.tree.getCheckedNodes(),t=[],a=0,n=e.length;a<n;a++)0==e[a].isparent&&t.push(e[a].area_name);return t},cleanCheckedNodes:function(){this.$refs.tree.setCheckedNodes([])},filterNode:function(e,t){return!e||-1!==e.indexOf(t.area_name)},addview:function(e){this.addvisible=!0,this.apartment.parent=e},addclose:function(){this.addvisible=!1,this.apartment.name=""},submitadd:function(){var e=this,t=new URLSearchParams;t.append("areaname",this.apartment.name),t.append("parentname",this.apartment.parent),this.$axios.post(o.c+"/basic/addArea",t).then(function(t){console.log(t),e.addvisible=!1,e.loadareas()})},deleteArea:function(e){var t=this;return i()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=new URLSearchParams,n.append("areaname",e),a.next=4,t.$axios.post(o.c+"/basic/deleteArea",n).then(function(e){return e&&200==e.data.status?(t.loadareas(),void(t.issuccess=!0)):e&&400==e.data.status?void(t.issuccess=!1):void 0});case 4:case"end":return a.stop()}},a,t)}))()},makesure:function(e){var t=this;return i()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=t,n.$confirm("如果继续将删除区域"+e+"，删除后将无法恢复，请谨慎操作！","你确定要删除区域吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i()(r.a.mark(function a(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.deleteArea(e);case 2:n.issuccess?n.$message({type:"success",message:"删除成功!"}):n.$message({type:"info",message:"该区域下有设备，无法删除"});case 3:case"end":return t.stop()}},a,t)}))).catch(function(){n.$message({type:"info",message:"已取消删除"})});case 2:case"end":return a.stop()}},a,t)}))()}}}},425:function(e,t,a){t=e.exports=a(268)(!1),t.push([e.i,".custom-tree-node{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;font-size:14px;padding-right:8px}.el-dialog__title{line-height:24px;font-size:18px;color:#fff}.el-dialog__header{padding:20px 20px 10px;background:#20a0ff;color:#fff}",""])},464:function(e,t,a){var n=a(425);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(269)("68697850",n,!0)},468:function(e,t,a){a(464);var n=a(39)(a(422),a(469),null,null);e.exports=n.exports},469:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"100%"}},[a("el-tree",{ref:"tree",attrs:{data:e.AreaTree,props:e.props,"show-checkbox":e.showcheckbox,"node-key":"area_name","highlight-current":"","expand-on-click-node":!1,"default-expand-all":"","filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.label))]),e._v(" "),n.isLeaf?a("div",[a("span",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.change,expression:"change"}],attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.addview(n.label)}}},[e._v("\n                        添加区域\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.change,expression:"change"}],staticStyle:{background:"#e64242"},attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.makesure(n.label)}}},[e._v("\n                        删除区域\n                    ")])],1)]):e._e()])}}])})],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px",height:"100%"},attrs:{title:"添加区域","close-on-click-modal":!1,"append-to-body":!0,visible:e.addvisible,width:"30%"},on:{"update:visible":function(t){e.addvisible=t},close:e.addclose}},[a("el-form",{staticStyle:{margin:"0px",padding:"0px",height:"100%"},attrs:{model:e.apartment}},[a("el-row",[a("el-col",[a("div",[a("el-form-item",{attrs:{label:"上级区域:","label-width":"120px","label-position":"right",prop:"username"}},[a("el-select",{model:{value:e.apartment.parent,callback:function(t){e.$set(e.apartment,"parent",t)},expression:"apartment.parent"}},e._l(e.areas,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1)]),e._v(" "),a("el-col",[a("div",[a("el-form-item",{attrs:{label:"地区名称:","label-width":"120px","label-position":"right",prop:"description"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入内容",size:"mini"},model:{value:e.apartment.name,callback:function(t){e.$set(e.apartment,"name",t)},expression:"apartment.name"}})],1)],1)])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitadd}},[e._v("\n                    确定\n                ")]),e._v(" "),a("el-button",{on:{click:e.addclose}},[e._v("\n                    取消\n                ")])],1)],1)],1)},staticRenderFns:[]}},600:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(468),r=a.n(n),s=a(293),i=a.n(s);t.default={data:function(){return{}},components:{AreaTree:r.a,headtop:i.a}}},632:function(e,t,a){t=e.exports=a(268)(!1),t.push([e.i,"",""])},870:function(e,t,a){var n=a(632);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(269)("bc6850dc",n,!0)},919:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("headtop"),e._v(" "),a("div",{staticStyle:{width:"70%"}},[a("Area-Tree",{attrs:{init:[],change:!0}})],1)],1)},staticRenderFns:[]}}});