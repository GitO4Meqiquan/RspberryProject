webpackJsonp([18],{241:function(e,t,a){a(805);var n=a(107)(a(544),a(828),"data-v-6932f0eb",null);e.exports=n.exports},391:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(37),r=a.n(n),s=a(36),i=a.n(s),o=a(61);t.default={data:function(){return{props:{label:"area_name",childrean:"childrean"},showcheckbox:!0,AreaTree:[],addvisible:!1,areas:[],apartment:{parent:"",name:""},issuccess:!1,input:""}},mounted:function(){this.loadareas()},props:["init","change"],watch:{init:{handler:function(e){this.init=e,this.$refs.tree.filter(e)}}},methods:{loadareas:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,e.post();case 3:e.init.length>0&&e.$refs.tree.filter(e.init),e.showcheckbox=!1,e.$axios.get(o.a+"/device/area/getAllArea").then(function(t){console.log(t),e.areas=t.data});case 6:case"end":return t.stop()}},t,e)}))()},post:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new URLSearchParams,a.append("pid",-1),t.next=4,e.$axios.post(o.a+"/basic/getAreaTree",a);case 4:n=t.sent,e.AreaTree=n.data;case 6:case"end":return t.stop()}},t,e)}))()},getCheckedNodes:function(){for(var e=this.$refs.tree.getCheckedNodes(),t=[],a=0,n=e.length;a<n;a++)0==e[a].isparent&&t.push(e[a].area_name);return t},cleanCheckedNodes:function(){this.$refs.tree.setCheckedNodes([])},filterNode:function(e,t){return!e||-1!==e.indexOf(t.area_name)},addview:function(e){this.addvisible=!0,this.apartment.parent=e},addclose:function(){this.addvisible=!1,this.apartment.name=""},submitadd:function(){var e=this,t=new URLSearchParams;t.append("areaname",this.apartment.name),t.append("parentname",this.apartment.parent),this.$axios.post(o.a+"/basic/addArea",t).then(function(t){console.log(t),e.loadareas(),e.addvisible=!1})},deleteArea:function(e){var t=this;return i()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=new URLSearchParams,n.append("areaname",e),a.next=4,t.$axios.post(o.a+"/basic/deleteArea",n).then(function(e){return e&&200==e.data.status?(t.loadareas(),void(t.issuccess=!0)):e&&400==e.data.status?void(t.issuccess=!1):void 0});case 4:case"end":return a.stop()}},a,t)}))()},makesure:function(e){var t=this;return i()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=t,n.$confirm("如果继续将删除区域"+e+"，删除后将无法恢复，请谨慎操作！","你确定要删除区域吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i()(r.a.mark(function a(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.deleteArea(e);case 2:n.issuccess?n.$message({type:"success",message:"删除成功!"}):n.$message({type:"info",message:"该区域下有设备，无法删除"});case 3:case"end":return t.stop()}},a,t)}))).catch(function(){n.$message({type:"info",message:"已取消删除"})});case 2:case"end":return a.stop()}},a,t)}))()}}}},392:function(e,t,a){t=e.exports=a(232)(!1),t.push([e.i,".custom-tree-node{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;font-size:14px;padding-right:8px}.el-dialog__title{line-height:24px;font-size:18px;color:#fff}.el-dialog__header{padding:20px 20px 10px;background:#20a0ff;color:#fff}",""])},431:function(e,t,a){var n=a(392);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(233)("7e9d22f4",n,!0)},432:function(e,t,a){a(431);var n=a(107)(a(391),a(433),null,null);e.exports=n.exports},433:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"100%"}},[a("el-tree",{ref:"tree",attrs:{data:e.AreaTree,props:e.props,"show-checkbox":e.showcheckbox,"node-key":"id","highlight-current":"","expand-on-click-node":!1,"default-expand-all":"","filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.label))]),e._v(" "),a("span",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.change,expression:"change"}],attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.addview(n.label)}}},[e._v("\n                        添加区域\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.change,expression:"change"}],staticStyle:{background:"#e64242"},attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.makesure(n.label)}}},[e._v("\n                        删除区域\n                    ")])],1)])}}])})],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px",height:"100%"},attrs:{title:"添加区域","close-on-click-modal":!1,"append-to-body":!0,visible:e.addvisible,width:"30%"},on:{"update:visible":function(t){e.addvisible=t},close:e.addclose}},[a("el-form",{staticStyle:{margin:"0px",padding:"0px",height:"100%"},attrs:{model:e.apartment}},[a("el-row",[a("el-col",[a("div",[a("el-form-item",{attrs:{label:"上级区域:","label-width":"120px","label-position":"right",prop:"username"}},[a("el-select",{model:{value:e.apartment.parent,callback:function(t){e.$set(e.apartment,"parent",t)},expression:"apartment.parent"}},e._l(e.areas,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1)]),e._v(" "),a("el-col",[a("div",[a("el-form-item",{attrs:{label:"地区名称:","label-width":"120px","label-position":"right",prop:"description"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入内容",size:"mini"},model:{value:e.apartment.name,callback:function(t){e.$set(e.apartment,"name",t)},expression:"apartment.name"}})],1)],1)])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitadd}},[e._v("\n                    确定\n                ")]),e._v(" "),a("el-button",{on:{click:e.addclose}},[e._v("\n                    取消\n                ")])],1)],1)],1)},staticRenderFns:[]}},544:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(432),r=a.n(n);t.default={data:function(){return{}},components:{AreaTree:r.a}}},567:function(e,t,a){t=e.exports=a(232)(!1),t.push([e.i,"",""])},805:function(e,t,a){var n=a(567);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(233)("addca118",n,!0)},828:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Area-Tree",{attrs:{init:[],change:!0}})],1)},staticRenderFns:[]}}});