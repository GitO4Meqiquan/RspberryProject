webpackJsonp([11],{243:function(e,t,i){i(806);var a=i(107)(i(546),i(829),null,null);e.exports=a.exports},269:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(37),n=i.n(a),l=i(36),o=i.n(l),r=i(62),s=i.n(r),d=i(108),c=i(61),p=i(109);t.default={data:function(){return{imgUrl:i(272),baseImgPath:c.b,test:0}},created:function(){this.adminInfo.id||this.getAdminData()},computed:s()({},i.i(p.a)(["adminInfo"])),props:["ok"],methods:s()({hh:function(){this.$store.dispatch("logout")}},i.i(p.b)(["getAdminData"]),{handleCommand:function(e){var t=this;return o()(n.a.mark(function a(){var l;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("home"!=e){a.next=4;break}t.$router.push("/manage"),a.next=10;break;case 4:if("signout"!=e){a.next=10;break}return a.next=7,i.i(d.a)();case 7:l=a.sent,console.log(l),203==l.status?(t.$message({type:"success",message:"退出成功"}),t.$store.dispatch("logout")):t.$message({type:"error",message:l.message});case 10:case"end":return a.stop()}},a,t)}))()},back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1)}})}},270:function(e,t,i){t=e.exports=i(232)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},271:function(e,t,i){var a=i(270);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(233)("0997366c",a,!0)},272:function(e,t,i){e.exports=i.p+"static/img/5gg.5a47940.png"},273:function(e,t,i){i(271);var a=i(107)(i(269),i(274),null,null);e.exports=a.exports},274:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header_container"},[e.ok?i("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",plain:""},on:{click:e.back}},[e._v("返回")]):e._e(),e._v(" "),i("img",{staticStyle:{width:"30px"},attrs:{src:e.imgUrl,alt:""}}),e._v(" "),i("p",{staticStyle:{margin:"15px","font-size":"25px",color:"#1d90e6"}},[e._v("银翔科技智能运维平台")]),e._v(" "),i("el-breadcrumb",{staticStyle:{"margin-right":"auto",padding:"10px"},attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/HomeMap"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta,function(t,a){return i("el-breadcrumb-item",{key:a},[e._v(e._s(t))])})],2),e._v(" "),i("el-dropdown",{on:{command:e.handleCommand}},[i("img",{staticClass:"avator",attrs:{src:e.baseImgPath+e.adminInfo.avatar}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"signout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},391:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(37),n=i.n(a),l=i(36),o=i.n(l),r=i(61);t.default={data:function(){return{props:{label:"area_name",childrean:"childrean"},showcheckbox:!0,AreaTree:[],addvisible:!1,areas:[],apartment:{parent:"",name:""},issuccess:!1,input:""}},mounted:function(){this.loadareas()},props:["init","change"],watch:{init:{handler:function(e){this.init=e,this.$refs.tree.filter(e)}}},methods:{loadareas:function(){var e=this;return o()(n.a.mark(function t(){var i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e,t.next=3,e.post();case 3:e.init.length>0&&e.$refs.tree.filter(e.init),e.showcheckbox=!1,e.$axios.get(r.a+"/device/area/getAllArea").then(function(t){console.log(t),e.areas=t.data});case 6:case"end":return t.stop()}},t,e)}))()},post:function(){var e=this;return o()(n.a.mark(function t(){var i,a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new URLSearchParams,i.append("pid",-1),t.next=4,e.$axios.post(r.a+"/basic/getAreaTree",i);case 4:a=t.sent,e.AreaTree=a.data;case 6:case"end":return t.stop()}},t,e)}))()},getCheckedNodes:function(){for(var e=this.$refs.tree.getCheckedNodes(),t=[],i=0,a=e.length;i<a;i++)0==e[i].isparent&&t.push(e[i].area_name);return t},cleanCheckedNodes:function(){this.$refs.tree.setCheckedNodes([])},filterNode:function(e,t){return!e||-1!==e.indexOf(t.area_name)},addview:function(e){this.addvisible=!0,this.apartment.parent=e},addclose:function(){this.addvisible=!1,this.apartment.name=""},submitadd:function(){var e=this,t=new URLSearchParams;t.append("areaname",this.apartment.name),t.append("parentname",this.apartment.parent),this.$axios.post(r.a+"/basic/addArea",t).then(function(t){console.log(t),e.loadareas(),e.addvisible=!1})},deleteArea:function(e){var t=this;return o()(n.a.mark(function i(){var a;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=new URLSearchParams,a.append("areaname",e),i.next=4,t.$axios.post(r.a+"/basic/deleteArea",a).then(function(e){return e&&200==e.data.status?(t.loadareas(),void(t.issuccess=!0)):e&&400==e.data.status?void(t.issuccess=!1):void 0});case 4:case"end":return i.stop()}},i,t)}))()},makesure:function(e){var t=this;return o()(n.a.mark(function i(){var a;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:a=t,a.$confirm("如果继续将删除区域"+e+"，删除后将无法恢复，请谨慎操作！","你确定要删除区域吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark(function i(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.deleteArea(e);case 2:a.issuccess?a.$message({type:"success",message:"删除成功!"}):a.$message({type:"info",message:"该区域下有设备，无法删除"});case 3:case"end":return t.stop()}},i,t)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 2:case"end":return i.stop()}},i,t)}))()}}}},392:function(e,t,i){t=e.exports=i(232)(!1),t.push([e.i,".custom-tree-node{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;font-size:14px;padding-right:8px}.el-dialog__title{line-height:24px;font-size:18px;color:#fff}.el-dialog__header{padding:20px 20px 10px;background:#20a0ff;color:#fff}",""])},431:function(e,t,i){var a=i(392);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(233)("7e9d22f4",a,!0)},432:function(e,t,i){i(431);var a=i(107)(i(391),i(433),null,null);e.exports=a.exports},433:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{width:"100%"}},[i("el-tree",{ref:"tree",attrs:{data:e.AreaTree,props:e.props,"show-checkbox":e.showcheckbox,"node-key":"id","highlight-current":"","expand-on-click-node":!1,"default-expand-all":"","filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[e._v(e._s(a.label))]),e._v(" "),i("span",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.change,expression:"change"}],attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.addview(a.label)}}},[e._v("\n                        添加区域\n                    ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.change,expression:"change"}],staticStyle:{background:"#e64242"},attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.makesure(a.label)}}},[e._v("\n                        删除区域\n                    ")])],1)])}}])})],1),e._v(" "),i("el-dialog",{staticStyle:{padding:"0px",height:"100%"},attrs:{title:"添加区域","close-on-click-modal":!1,"append-to-body":!0,visible:e.addvisible,width:"30%"},on:{"update:visible":function(t){e.addvisible=t},close:e.addclose}},[i("el-form",{staticStyle:{margin:"0px",padding:"0px",height:"100%"},attrs:{model:e.apartment}},[i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"上级区域:","label-width":"120px","label-position":"right",prop:"username"}},[i("el-select",{model:{value:e.apartment.parent,callback:function(t){e.$set(e.apartment,"parent",t)},expression:"apartment.parent"}},e._l(e.areas,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1)]),e._v(" "),i("el-col",[i("div",[i("el-form-item",{attrs:{label:"地区名称:","label-width":"120px","label-position":"right",prop:"description"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入内容",size:"mini"},model:{value:e.apartment.name,callback:function(t){e.$set(e.apartment,"name",t)},expression:"apartment.name"}})],1)],1)])],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitadd}},[e._v("\n                    确定\n                ")]),e._v(" "),i("el-button",{on:{click:e.addclose}},[e._v("\n                    取消\n                ")])],1)],1)],1)},staticRenderFns:[]}},546:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(273),n=i.n(a),l=i(61),o=i(38),r=i.n(o),s=i(64),d=(i.n(s),i(432)),c=i.n(d);t.default={components:{headTop:n.a,AreaTree:c.a},data:function(){return{keywords:"",devices:[],types:[],areas:[],device:{id:null,description:"",latitude:null,longitude:null,areaname:"",type:""},num:null,tableloading:!1,currentpage:1,editTitle:"",editVisible:!1,addVisible:!1}},mounted:function(){this.loaddevices()},methods:{loaddevices:function(){var e=this;e.tableloading=!0,console.log(l.a+"/basic/devices?page="+this.currentpage+"&size=10&keywords= "+this.keywords),r.a.get(l.a+"/basic/devices?page="+this.currentpage+"&size=10&keywords="+this.keywords).then(function(t){t&&200==t.status&&(console.log(t),e.areas=t.data.areas,e.types=t.data.types,e.tableloading=!1,e.devices=t.data.devices,e.num=t.data.count)})},search:function(){this.currentpage=1,this.loaddevices()},edit:function(e){this.editTitle="设备信息",this.device.id=e.id,this.device.latitude=e.latitude,this.device.longitude=e.longitude,this.device.description=e.description,this.device.type=e.type,this.editVisible=!0},submitchange:function(){var e=this;e.editVisible=!1,e.tableloading=!0;var t=new URLSearchParams;t.append("id",e.device.id),t.append("latitude",e.device.latitude),t.append("longitude",e.device.longitude),t.append("description",e.device.description),t.append("type",e.device.type),console.log(e.device.type),r.a.post(l.a+"/basic/updatedevice",t).then(function(t){console.log(t),e.tableloading=!1,e.loaddevices()})},cancelchange:function(){this.editVisible=!1,this.addVisible=!1},addmeun:function(){this.addVisible=!0,this.editTitle="添加设备",this.device={id:null,description:"",latitude:null,longitude:null,type:""}},submitadd:function(){var e=this,t=this.device;if(null==t.id||""==t.description||null==t.latitude||null==t.longitude||""==t.type)return void s.Message.error("请输入完整设备信息");var i=new URLSearchParams;i.append("id",e.device.id),i.append("latitude",e.device.latitude),i.append("longitude",e.device.longitude),i.append("description",e.device.description),i.append("statusname","正常"),i.append("type",e.device.type),i.append("areaname",e.device.areaname),r.a.post(l.a+"/basic/addDevice",i).then(function(t){console.log(t),e.addVisible=!1,e.loaddevices()})},makesureDelete:function(e){console.log(e);var t=this;t.$confirm("如果继续将删除设备"+e.id+"，删除后将无法恢复，请谨慎操作！","你确定要删除设备吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deletedevice(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deletedevice:function(e){var t=this;t.tableloading=!0;var i={};i.device_id=e.id,console.log(i),t.$axios.post(testurl+"/basic/deleteDevice",i).then(function(e){console.log(e),t.addVisible=!1,t.loaddevices()})}}}},568:function(e,t,i){t=e.exports=i(232)(!1),t.push([e.i,".el-switch__label{position:absolute;display:none;color:#fff}.el-switch__label--right{z-index:1;right:-3px;color:#fff}.el-switch__label--left{z-index:1;left:19px;color:#fff}.el-switch__label.is-active{display:block;color:#fff!important}.el-switch__core,.el-switch__label{width:50px!important}.el-dialog__body{padding:0;color:#606266;font-size:14px;word-break:break-all}.el-dialog__header{padding:20px 20px 10px;background:#20a0ff;color:#fff}.el-main{display:block;-ms-flex:1;flex:1;-ms-flex-preferred-size:auto;flex-basis:auto;overflow:auto;box-sizing:border-box;padding:10px}.el-checkbox-button{width:320px;height:40px}.el-checkbox-button__inner{text-align:left;display:inline-block;position:relative;left:10px;width:300px;height:32px;padding:8px 12px;border:1px solid #ffebcd}",""])},806:function(e,t,i){var a=i(568);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(233)("a59bf0d6",a,!0)},829:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("head-top"),e._v(" "),i("el-container",{staticStyle:{"margin-top":"20px"}},[i("el-header",{staticStyle:{height:"60px",width:"1000px"}},[i("div",{staticStyle:{display:"inline"}},[i("el-button",{staticStyle:{float:"left"},attrs:{round:"",type:"primary",icon:"el-icon-plus"},on:{click:e.addmeun}},[e._v(" 添加设备")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("el-input",{staticStyle:{width:"300px",float:"right"},attrs:{placeholder:"搜索",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1)]),e._v(" "),i("el-main",{staticStyle:{height:"600px"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.devices,border:"",stripe:"",size:"mini"}},[i("el-table-column",{attrs:{type:"text",prop:"id",align:"center",fixed:"",label:"设备名称",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",prop:"areaname",align:"center",fixed:"",label:"所属区域",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",prop:"latitude",align:"center",fixed:"",label:"维度",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",prop:"longitude",align:"center",fixed:"",label:"经度",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",prop:"description",align:"center",fixed:"",label:"说明",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",prop:"type",align:"center",fixed:"",label:"类型",width:""}}),e._v(" "),i("el-table-column",{attrs:{type:"text",align:"center",fixed:"right",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.edit(t.row)}}},[e._v("设备信息")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.makesureDelete(t.row)}}},[e._v("删除设备")])]}}])})],1)],1),e._v(" "),i("el-footer",[i("label",[e._v(e._s("显示第 "+(1+10*(e.currentpage-1))+" 到第 "+(10*e.currentpage>e.num?e.num:10*e.currentpage)+" 条记录，总共 "+e.num+" 条记录"))]),e._v(" "),i("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"prev, pager, next",total:e.num,"page-size":10,"current-page":e.currentpage},on:{"update:currentPage":function(t){e.currentpage=t},"update:current-page":function(t){e.currentpage=t},"current-change":e.loaddevices}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"left"}},[i("el-dialog",{staticStyle:{padding:"0px",height:"100%"},attrs:{title:e.editTitle,"close-on-click-modal":!1,visible:e.addVisible,width:"77%","append-to-body":!0},on:{"update:visible":function(t){e.addVisible=t}}},[i("el-container",[i("el-aside",{attrs:{width:"50%"}},[i("el-form",{staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.device,"status-icon":""}},[i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"设备名称:","label-width":"120px","label-position":"right",prop:"id"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.id,callback:function(t){e.$set(e.device,"id",t)},expression:"device.id"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"维度:","label-width":"120px","label-position":"right",prop:"latitude"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.latitude,callback:function(t){e.$set(e.device,"latitude",t)},expression:"device.latitude"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"经度:","label-width":"120px","label-position":"right",prop:"longitude"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.longitude,callback:function(t){e.$set(e.device,"longitude",t)},expression:"device.longitude"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"说明:","label-width":"120px","label-position":"right",prop:"description"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.description,callback:function(t){e.$set(e.device,"description",t)},expression:"device.description"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"有无PM2.5:","label-width":"120px","label-position":"right",prop:"type"}},[i("el-radio-group",{model:{value:e.device.type,callback:function(t){e.$set(e.device,"type",t)},expression:"device.type"}},e._l(e.types,function(t){return i("el-radio",{key:t,attrs:{label:t,border:""}},[e._v(e._s(t))])}),1)],1)],1)])],1)],1)],1),e._v(" "),i("el-main",[i("el-header",{staticStyle:{padding:"20px 20px 10px",background:"#eeeeee"}},[e._v("\n                  所属区域\n              ")]),e._v(" "),i("area-tree")],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.cancelchange}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitadd}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("el-form",{staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.device}},[i("div",{staticStyle:{"text-align":"left"}},[i("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.editTitle,"close-on-click-modal":!1,visible:e.editVisible,width:"77%","append-to-body":!0},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"设备名称:","label-width":"120px","label-position":"right",prop:"id"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.id,callback:function(t){e.$set(e.device,"id",t)},expression:"device.id"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"维度:","label-width":"120px","label-position":"right",prop:"latitude"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.latitude,callback:function(t){e.$set(e.device,"latitude",t)},expression:"device.latitude"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"经度:","label-width":"120px","label-position":"right",prop:"longitude"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.longitude,callback:function(t){e.$set(e.device,"longitude",t)},expression:"device.longitude"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"说明:","label-width":"120px","label-position":"right",prop:"description"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.device.description,callback:function(t){e.$set(e.device,"description",t)},expression:"device.description"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",[i("div",[i("el-form-item",{attrs:{label:"有无PM2.5:","label-width":"120px","label-position":"right",prop:"type"}},[i("el-radio-group",{model:{value:e.device.type,callback:function(t){e.$set(e.device,"type",t)},expression:"device.type"}},e._l(e.types,function(t){return i("el-radio",{key:t,attrs:{label:t,border:""}},[e._v(e._s(t))])}),1)],1)],1)])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.cancelchange}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitchange}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]}}});